{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pratikshekhar/Desktop/cs530/FontEnd/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport { Link } from \"react-router-dom\";\nimport apiKey from \"./Constant.js\";\nimport { Input, Card, Col, Row, Icon, Layout, Menu, Breadcrumb } from \"antd\";\nimport \"antd/dist/antd.css\";\nvar Search = Input.Search;\nvar Meta = Card.Meta;\nvar Header = Layout.Header,\n    Content = Layout.Content,\n    Footer = Layout.Footer;\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cravings: [],\n      fav: [],\n      searchedText: \"\"\n    };\n\n    _this.componentDidMount = function () {\n      var json = localStorage.getItem(\"recipesData\");\n      var recipes = JSON.parse(json);\n      console.log(recipes);\n\n      if (recipes != null) {\n        _this.setState({\n          cravings: recipes\n        });\n      }\n\n      var url = \"http://localhost:3005/getFav?userName=pratik\";\n      fetch(url, {\n        method: \"GET\",\n        mode: \"cors\"\n      }).then(function (res) {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n\n        return res;\n      }).then(function (res) {\n        return res.json();\n      }).then(function (responseJson) {\n        var temp = responseJson.map(function (a) {\n          return a.recipe_id;\n        });\n\n        _this.setState({\n          fav: temp\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.componentDidUpdate = function () {\n      var recipes = JSON.stringify(_this.state.cravings);\n      localStorage.setItem(\"recipes\", recipes);\n    };\n\n    _this.cardSave = function (recipe) {\n      var url = \"http://localhost:3005/addToFav?cardId=\" + JSON.stringify(recipe) + \"&&userName=pratik\";\n      fetch(url, {\n        method: \"GET\",\n        mode: \"cors\"\n      }).then(function (res) {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n\n        return res;\n      }).then(function (responseJson) {\n        _this.setState({\n          fav: [].concat(_toConsumableArray(_this.state.fav), [recipe.recipe_id])\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.cardUnsave = function (recipe) {\n      var url = \"http://localhost:3005/removeFromFav?cardId=\" + JSON.stringify(recipe) + \"&&userName=pratik\";\n      fetch(url, {\n        method: \"GET\",\n        mode: \"cors\"\n      }).then(function (res) {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n\n        return res;\n      }).then(function (responseJson) {\n        _this.setState({\n          fav: _this.state.fav.filter(function (item) {\n            return item !== recipe.recipe_id;\n          })\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.getHeartColor = function (id) {\n      if (_this.state.fav.includes(id)) {\n        return {\n          color: \"red\"\n        };\n      } else {\n        return {\n          color: null\n        };\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"getCravings\",\n    value: function () {\n      var _getCravings = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(recipeName) {\n        var apiCall, data, recipesData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(recipeName);\n                _context.next = 3;\n                return fetch(\"https://www.food2fork.com/api/search?key=\".concat(apiKey, \"&q=\").concat(recipeName, \"&count=20\"));\n\n              case 3:\n                apiCall = _context.sent;\n                _context.next = 6;\n                return apiCall.json();\n\n              case 6:\n                data = _context.sent;\n                this.setState({\n                  cravings: data.recipes\n                });\n                recipesData = JSON.stringify(data.recipes);\n                localStorage.setItem(\"recipesData\", recipesData);\n                console.log(this.state.cravings);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getCravings(_x) {\n        return _getCravings.apply(this, arguments);\n      }\n\n      return getCravings;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Layout, {\n        className: \"layout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(Menu, {\n        theme: \"dark\",\n        mode: \"horizontal\",\n        defaultSelectedKeys: [\"1\"],\n        style: {\n          lineHeight: \"64px\",\n          alignContent: \"center\",\n          alignItems: \"center\",\n          justifyContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Menu.Item, {\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Home\"), React.createElement(Menu.Item, {\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"/fav\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Fav\")), React.createElement(Menu.Item, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Search, {\n        style: {\n          verticalAlign: \"middle\",\n          margin: 0,\n          flex: 1\n        },\n        placeholder: \"input search text\",\n        enterButton: \"Search\",\n        size: \"large\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            searchedText: e.target.value\n          });\n        },\n        onSearch: function onSearch() {\n          return _this2.getCravings(_this2.state.searchedText);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })))), React.createElement(Content, {\n        style: {\n          padding: \"0 50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Breadcrumb, {\n        style: {\n          margin: \"16px 0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          background: \"#fff\",\n          padding: 24,\n          minHeight: 280\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          background: \"#ECECEC\",\n          padding: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.cravings.length > 0 && React.createElement(Row, {\n        gutter: 16,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, this.state.cravings.map(function (recipe, index) {\n        return React.createElement(Col, {\n          span: 8,\n          key: recipe.recipe_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(Card, {\n          style: {\n            width: 400,\n            marginBottom: 15\n          },\n          cover: React.createElement(\"img\", {\n            alt: \"example\",\n            src: recipe.image_url,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179\n            },\n            __self: this\n          }),\n          actions: [React.createElement(Icon, {\n            type: \"heart\",\n            style: _this2.getHeartColor(recipe.recipe_id),\n            theme: _this2.state.fav.includes(recipe.recipe_id) ? \"filled\" : \"outlined\",\n            onClick: function onClick() {\n              return _this2.state.fav.includes(recipe.recipe_id) ? _this2.cardUnsave(recipe) : _this2.cardSave(recipe);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }), React.createElement(Icon, {\n            type: \"global\",\n            onClick: function onClick() {\n              return window.open(recipe.publisher_url);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(Meta, {\n          title: recipe.title,\n          description: recipe.publisher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        })));\n      })), this.state.cravings.length === 0 && React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Search for Recipe\"))))), React.createElement(Footer, {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Ant Design \\xA92018 Created by Ant UED\"));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/pratikshekhar/Desktop/cs530/FontEnd/src/App.js"],"names":["React","Component","Link","apiKey","Input","Card","Col","Row","Icon","Layout","Menu","Breadcrumb","Search","Meta","Header","Content","Footer","App","state","cravings","fav","searchedText","componentDidMount","json","localStorage","getItem","recipes","JSON","parse","console","log","setState","url","fetch","method","mode","then","res","ok","Error","statusText","responseJson","temp","map","a","recipe_id","catch","err","componentDidUpdate","stringify","setItem","cardSave","recipe","cardUnsave","filter","item","getHeartColor","id","includes","color","recipeName","apiCall","data","recipesData","lineHeight","alignContent","alignItems","justifyContent","pathname","flex","verticalAlign","margin","e","target","value","getCravings","padding","background","minHeight","length","index","width","marginBottom","image_url","window","open","publisher_url","title","publisher","textAlign"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgCC,IAAhC,EAAsCC,MAAtC,EAA8CC,IAA9C,EAAoDC,UAApD,QAAsE,MAAtE;AACA,OAAO,oBAAP;AAEA,IAAMC,MAAM,GAAGR,KAAK,CAACQ,MAArB;IACQC,I,GAASR,I,CAATQ,I;IACAC,M,GAA4BL,M,CAA5BK,M;IAAQC,O,GAAoBN,M,CAApBM,O;IAASC,M,GAAWP,M,CAAXO,M;;IAEnBC,G;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,GAAG,EAAE,EAFC;AAGNC,MAAAA,YAAY,EAAE;AAHR,K;;UAoBRC,iB,GAAoB,YAAM;AACxB,UAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAb;AACA,UAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAhB;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;;AACA,UAAIA,OAAO,IAAI,IAAf,EAAqB;AACnB,cAAKK,QAAL,CAAc;AAAEZ,UAAAA,QAAQ,EAAEO;AAAZ,SAAd;AACD;;AAED,UAAIM,GAAG,GAAG,8CAAV;AACAC,MAAAA,KAAK,CAACD,GAAD,EAAM;AACTE,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,IAAI,EAAE;AAFG,OAAN,CAAL,CAIGC,IAJH,CAIQ,UAAAC,GAAG,EAAI;AACX,YAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,gBAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;AACD;;AACD,eAAOH,GAAP;AACD,OATH,EAUGD,IAVH,CAUQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACd,IAAJ,EAAJ;AAAA,OAVX,EAWGa,IAXH,CAWQ,UAAAK,YAAY,EAAI;AACpB,YAAIC,IAAI,GAAGD,YAAY,CAACE,GAAb,CAAiB,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACC,SAAN;AAAA,SAAlB,CAAX;;AACA,cAAKd,QAAL,CAAc;AACZX,UAAAA,GAAG,EAAEsB;AADO,SAAd;AAGD,OAhBH,EAiBGI,KAjBH,CAiBS,UAAAC,GAAG,EAAI;AACZlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,GAAZ;AACD,OAnBH;AAoBD,K;;UAEDC,kB,GAAqB,YAAM;AACzB,UAAMtB,OAAO,GAAGC,IAAI,CAACsB,SAAL,CAAe,MAAK/B,KAAL,CAAWC,QAA1B,CAAhB;AACAK,MAAAA,YAAY,CAAC0B,OAAb,CAAqB,SAArB,EAAgCxB,OAAhC;AACD,K;;UAEDyB,Q,GAAW,UAAAC,MAAM,EAAI;AACnB,UAAIpB,GAAG,GACL,2CACAL,IAAI,CAACsB,SAAL,CAAeG,MAAf,CADA,GAEA,mBAHF;AAIAnB,MAAAA,KAAK,CAACD,GAAD,EAAM;AACTE,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,IAAI,EAAE;AAFG,OAAN,CAAL,CAIGC,IAJH,CAIQ,UAAAC,GAAG,EAAI;AACX,YAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,gBAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;AACD;;AACD,eAAOH,GAAP;AACD,OATH,EAUGD,IAVH,CAUQ,UAAAK,YAAY,EAAI;AACpB,cAAKV,QAAL,CAAc;AACZX,UAAAA,GAAG,+BAAM,MAAKF,KAAL,CAAWE,GAAjB,IAAsBgC,MAAM,CAACP,SAA7B;AADS,SAAd;AAGD,OAdH,EAeGC,KAfH,CAeS,UAAAC,GAAG,EAAI;AACZlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,GAAZ;AACD,OAjBH;AAkBD,K;;UAEDM,U,GAAa,UAAAD,MAAM,EAAI;AACrB,UAAIpB,GAAG,GACL,gDACAL,IAAI,CAACsB,SAAL,CAAeG,MAAf,CADA,GAEA,mBAHF;AAIAnB,MAAAA,KAAK,CAACD,GAAD,EAAM;AACTE,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,IAAI,EAAE;AAFG,OAAN,CAAL,CAIGC,IAJH,CAIQ,UAAAC,GAAG,EAAI;AACX,YAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACX,gBAAMC,KAAK,CAACF,GAAG,CAACG,UAAL,CAAX;AACD;;AACD,eAAOH,GAAP;AACD,OATH,EAUGD,IAVH,CAUQ,UAAAK,YAAY,EAAI;AACpB,cAAKV,QAAL,CAAc;AACZX,UAAAA,GAAG,EAAE,MAAKF,KAAL,CAAWE,GAAX,CAAekC,MAAf,CAAsB,UAAAC,IAAI;AAAA,mBAAIA,IAAI,KAAKH,MAAM,CAACP,SAApB;AAAA,WAA1B;AADO,SAAd;AAGD,OAdH,EAeGC,KAfH,CAeS,UAAAC,GAAG,EAAI;AACZlB,QAAAA,OAAO,CAACC,GAAR,CAAYiB,GAAZ;AACD,OAjBH;AAkBD,K;;UAEDS,a,GAAgB,UAAAC,EAAE,EAAI;AACpB,UAAI,MAAKvC,KAAL,CAAWE,GAAX,CAAesC,QAAf,CAAwBD,EAAxB,CAAJ,EAAiC;AAC/B,eAAO;AAAEE,UAAAA,KAAK,EAAE;AAAT,SAAP;AACD,OAFD,MAEO;AACL,eAAO;AAAEA,UAAAA,KAAK,EAAE;AAAT,SAAP;AACD;AACF,K;;;;;;;;;;gDA1GiBC,U;;;;;;AAChB/B,gBAAAA,OAAO,CAACC,GAAR,CAAY8B,UAAZ;;uBACsB3B,KAAK,oDACmB9B,MADnB,gBAC+ByD,UAD/B,e;;;AAArBC,gBAAAA,O;;uBAGaA,OAAO,CAACtC,IAAR,E;;;AAAbuC,gBAAAA,I;AACN,qBAAK/B,QAAL,CAAc;AAAEZ,kBAAAA,QAAQ,EAAE2C,IAAI,CAACpC;AAAjB,iBAAd;AAEMqC,gBAAAA,W,GAAcpC,IAAI,CAACsB,SAAL,CAAea,IAAI,CAACpC,OAApB,C;AACpBF,gBAAAA,YAAY,CAAC0B,OAAb,CAAqB,aAArB,EAAoCa,WAApC;AAEAlC,gBAAAA,OAAO,CAACC,GAAR,CAAY,KAAKZ,KAAL,CAAWC,QAAvB;;;;;;;;;;;;;;;;;;6BAiGO;AAAA;;AACP,aACE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,IAAD;AACE,QAAA,KAAK,EAAC,MADR;AAEE,QAAA,IAAI,EAAC,YAFP;AAGE,QAAA,mBAAmB,EAAE,CAAC,GAAD,CAHvB;AAIE,QAAA,KAAK,EAAE;AACL6C,UAAAA,UAAU,EAAE,MADP;AAELC,UAAAA,YAAY,EAAE,QAFT;AAGLC,UAAAA,UAAU,EAAE,QAHP;AAILC,UAAAA,cAAc,EAAE;AAJX,SAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,GAAG,EAAC,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,EAYE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,GAAG,EAAC,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CAZF,EAeE,oBAAC,IAAD,CAAM,IAAN;AACE,QAAA,KAAK,EAAE;AACLC,UAAAA,IAAI,EAAE;AADD,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE;AACLC,UAAAA,aAAa,EAAE,QADV;AAELC,UAAAA,MAAM,EAAE,CAFH;AAGLF,UAAAA,IAAI,EAAE;AAHD,SADT;AAME,QAAA,WAAW,EAAC,mBANd;AAOE,QAAA,WAAW,EAAC,QAPd;AAQE,QAAA,IAAI,EAAC,OARP;AASE,QAAA,QAAQ,EAAE,kBAAAG,CAAC;AAAA,iBAAI,MAAI,CAACzC,QAAL,CAAc;AAAEV,YAAAA,YAAY,EAAEmD,CAAC,CAACC,MAAF,CAASC;AAAzB,WAAd,CAAJ;AAAA,SATb;AAUE,QAAA,QAAQ,EAAE;AAAA,iBAAM,MAAI,CAACC,WAAL,CAAiB,MAAI,CAACzD,KAAL,CAAWG,YAA5B,CAAN;AAAA,SAVZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CAfF,CAFF,CADF,EAsCE,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAE;AAAEuD,UAAAA,OAAO,EAAE;AAAX,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAE;AAAEL,UAAAA,MAAM,EAAE;AAAV,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAK,QAAA,KAAK,EAAE;AAAEM,UAAAA,UAAU,EAAE,MAAd;AAAsBD,UAAAA,OAAO,EAAE,EAA/B;AAAmCE,UAAAA,SAAS,EAAE;AAA9C,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAE;AAAED,UAAAA,UAAU,EAAE,SAAd;AAAyBD,UAAAA,OAAO,EAAE;AAAlC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK1D,KAAL,CAAWC,QAAX,CAAoB4D,MAApB,GAA6B,CAA7B,IACC,oBAAC,GAAD;AAAK,QAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK7D,KAAL,CAAWC,QAAX,CAAoBwB,GAApB,CAAwB,UAACS,MAAD,EAAS4B,KAAT,EAAmB;AAC1C,eACE,oBAAC,GAAD;AAAK,UAAA,IAAI,EAAE,CAAX;AAAc,UAAA,GAAG,EAAE5B,MAAM,CAACP,SAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,IAAD;AACE,UAAA,KAAK,EAAE;AAAEoC,YAAAA,KAAK,EAAE,GAAT;AAAcC,YAAAA,YAAY,EAAE;AAA5B,WADT;AAEE,UAAA,KAAK,EAAE;AAAK,YAAA,GAAG,EAAC,SAAT;AAAmB,YAAA,GAAG,EAAE9B,MAAM,CAAC+B,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFT;AAGE,UAAA,OAAO,EAAE,CACP,oBAAC,IAAD;AACE,YAAA,IAAI,EAAC,OADP;AAEE,YAAA,KAAK,EAAE,MAAI,CAAC3B,aAAL,CAAmBJ,MAAM,CAACP,SAA1B,CAFT;AAGE,YAAA,KAAK,EACH,MAAI,CAAC3B,KAAL,CAAWE,GAAX,CAAesC,QAAf,CAAwBN,MAAM,CAACP,SAA/B,IACI,QADJ,GAEI,UANR;AAQE,YAAA,OAAO,EAAE;AAAA,qBACP,MAAI,CAAC3B,KAAL,CAAWE,GAAX,CAAesC,QAAf,CAAwBN,MAAM,CAACP,SAA/B,IACI,MAAI,CAACQ,UAAL,CAAgBD,MAAhB,CADJ,GAEI,MAAI,CAACD,QAAL,CAAcC,MAAd,CAHG;AAAA,aARX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADO,EAeP,oBAAC,IAAD;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,OAAO,EAAE;AAAA,qBAAMgC,MAAM,CAACC,IAAP,CAAYjC,MAAM,CAACkC,aAAnB,CAAN;AAAA,aAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAfO,CAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAwBE,oBAAC,IAAD;AACE,UAAA,KAAK,EAAElC,MAAM,CAACmC,KADhB;AAEE,UAAA,WAAW,EAAEnC,MAAM,CAACoC,SAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAxBF,CADF,CADF;AAiCD,OAlCA,CADH,CAFJ,EAwCG,KAAKtE,KAAL,CAAWC,QAAX,CAAoB4D,MAApB,KAA+B,CAA/B,IACC;AACE,QAAA,KAAK,EAAE;AACLU,UAAAA,SAAS,EAAE;AADN,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BALF,CAzCJ,CADF,CAFF,CAtCF,EA6FE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAAEA,UAAAA,SAAS,EAAE;AAAb,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDA7FF,CADF;AAmGD;;;;EAvNexF,S;;AA0NlB,eAAegB,GAAf","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { Link } from \"react-router-dom\";\nimport apiKey from \"./Constant.js\";\n\nimport { Input, Card, Col, Row, Icon, Layout, Menu, Breadcrumb } from \"antd\";\nimport \"antd/dist/antd.css\";\n\nconst Search = Input.Search;\nconst { Meta } = Card;\nconst { Header, Content, Footer } = Layout;\n\nclass App extends Component {\n  state = {\n    cravings: [],\n    fav: [],\n    searchedText: \"\"\n  };\n\n  async getCravings(recipeName) {\n    console.log(recipeName);\n    const apiCall = await fetch(\n      `https://www.food2fork.com/api/search?key=${apiKey}&q=${recipeName}&count=20`\n    );\n    const data = await apiCall.json();\n    this.setState({ cravings: data.recipes });\n\n    const recipesData = JSON.stringify(data.recipes);\n    localStorage.setItem(\"recipesData\", recipesData);\n\n    console.log(this.state.cravings);\n  }\n\n  componentDidMount = () => {\n    const json = localStorage.getItem(\"recipesData\");\n    const recipes = JSON.parse(json);\n    console.log(recipes);\n    if (recipes != null) {\n      this.setState({ cravings: recipes });\n    }\n\n    var url = \"http://localhost:3005/getFav?userName=pratik\";\n    fetch(url, {\n      method: \"GET\",\n      mode: \"cors\"\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n        return res;\n      })\n      .then(res => res.json())\n      .then(responseJson => {\n        var temp = responseJson.map(a => a.recipe_id);\n        this.setState({\n          fav: temp\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  componentDidUpdate = () => {\n    const recipes = JSON.stringify(this.state.cravings);\n    localStorage.setItem(\"recipes\", recipes);\n  };\n\n  cardSave = recipe => {\n    var url =\n      \"http://localhost:3005/addToFav?cardId=\" +\n      JSON.stringify(recipe) +\n      \"&&userName=pratik\";\n    fetch(url, {\n      method: \"GET\",\n      mode: \"cors\"\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n        return res;\n      })\n      .then(responseJson => {\n        this.setState({\n          fav: [...this.state.fav, recipe.recipe_id]\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  cardUnsave = recipe => {\n    var url =\n      \"http://localhost:3005/removeFromFav?cardId=\" +\n      JSON.stringify(recipe) +\n      \"&&userName=pratik\";\n    fetch(url, {\n      method: \"GET\",\n      mode: \"cors\"\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n        return res;\n      })\n      .then(responseJson => {\n        this.setState({\n          fav: this.state.fav.filter(item => item !== recipe.recipe_id)\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  getHeartColor = id => {\n    if (this.state.fav.includes(id)) {\n      return { color: \"red\" };\n    } else {\n      return { color: null };\n    }\n  };\n\n  render() {\n    return (\n      <Layout className=\"layout\">\n        <Header>\n          <div className=\"logo\" />\n          <Menu\n            theme=\"dark\"\n            mode=\"horizontal\"\n            defaultSelectedKeys={[\"1\"]}\n            style={{\n              lineHeight: \"64px\",\n              alignContent: \"center\",\n              alignItems: \"center\",\n              justifyContent: \"center\"\n            }}\n          >\n            <Menu.Item key=\"1\">Home</Menu.Item>\n            <Menu.Item key=\"2\">\n              <Link to={{ pathname: \"/fav\" }}>Fav</Link>\n            </Menu.Item>\n            <Menu.Item\n              style={{\n                flex: 1\n              }}\n            >\n              <Search\n                style={{\n                  verticalAlign: \"middle\",\n                  margin: 0,\n                  flex: 1\n                }}\n                placeholder=\"input search text\"\n                enterButton=\"Search\"\n                size=\"large\"\n                onChange={e => this.setState({ searchedText: e.target.value })}\n                onSearch={() => this.getCravings(this.state.searchedText)}\n              />\n            </Menu.Item>\n          </Menu>\n        </Header>\n        <Content style={{ padding: \"0 50px\" }}>\n          <Breadcrumb style={{ margin: \"16px 0\" }} />\n          <div style={{ background: \"#fff\", padding: 24, minHeight: 280 }}>\n            <div style={{ background: \"#ECECEC\", padding: \"30px\" }}>\n              {this.state.cravings.length > 0 && (\n                <Row gutter={16}>\n                  {this.state.cravings.map((recipe, index) => {\n                    return (\n                      <Col span={8} key={recipe.recipe_id}>\n                        <Card\n                          style={{ width: 400, marginBottom: 15 }}\n                          cover={<img alt=\"example\" src={recipe.image_url} />}\n                          actions={[\n                            <Icon\n                              type=\"heart\"\n                              style={this.getHeartColor(recipe.recipe_id)}\n                              theme={\n                                this.state.fav.includes(recipe.recipe_id)\n                                  ? \"filled\"\n                                  : \"outlined\"\n                              }\n                              onClick={() =>\n                                this.state.fav.includes(recipe.recipe_id)\n                                  ? this.cardUnsave(recipe)\n                                  : this.cardSave(recipe)\n                              }\n                            />,\n                            <Icon\n                              type=\"global\"\n                              onClick={() => window.open(recipe.publisher_url)}\n                            />\n                          ]}\n                        >\n                          <Meta\n                            title={recipe.title}\n                            description={recipe.publisher}\n                          />\n                        </Card>\n                      </Col>\n                    );\n                  })}\n                </Row>\n              )}\n              {this.state.cravings.length === 0 && (\n                <div\n                  style={{\n                    textAlign: \"center\"\n                  }}\n                >\n                  <h5>Search for Recipe</h5>\n                </div>\n              )}\n            </div>\n          </div>\n        </Content>\n        <Footer style={{ textAlign: \"center\" }}>\n          Ant Design ©2018 Created by Ant UED\n        </Footer>\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}