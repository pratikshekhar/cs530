{"ast":null,"code":"import _toConsumableArray from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pratikshekhar/Desktop/cs530/FontEnd/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pratikshekhar/Desktop/cs530/FontEnd/src/Components/Fav.js\";\nimport React, { Component } from \"react\";\nimport apiKey from \"../Constant.js\";\nimport { Link } from \"react-router-dom\";\nimport { Layout, Menu, Breadcrumb } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport { Card, Col, Row, Icon } from \"antd\";\nvar Meta = Card.Meta;\nvar Header = Layout.Header,\n    Content = Layout.Content,\n    Footer = Layout.Footer;\n\nvar Fav =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Fav, _Component);\n\n  function Fav() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Fav);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Fav)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cravings: [],\n      fav: []\n    };\n\n    _this.getCravings =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var recipeName, apiCall, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                recipeName = e.target.elements.recipeName.value;\n                e.preventDefault();\n                _context.next = 4;\n                return fetch(\"https://www.food2fork.com/api/search?key=\".concat(apiKey, \"&q=\").concat(recipeName, \"&count=20\"));\n\n              case 4:\n                apiCall = _context.sent;\n                _context.next = 7;\n                return apiCall.json();\n\n              case 7:\n                data = _context.sent;\n\n                _this.setState({\n                  cravings: data.recipes\n                });\n\n                console.log(_this.state.cravings);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.componentDidMount = function () {\n      // const json = localStorage.getItem(\"recipes\");\n      // const recipes = JSON.parse(json);\n      // this.setState({ cravings: recipes });\n      var url = \"http://localhost:3005/getFav?userName=pratik\";\n      fetch(url, {\n        method: \"GET\",\n        mode: \"cors\"\n      }).then(function (res) {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n\n        return res;\n      }).then(function (res) {\n        return res.json();\n      }).then(function (responseJson) {\n        console.log(responseJson);\n\n        _this.setState({\n          cravings: responseJson\n        });\n\n        var temp = responseJson.map(function (a) {\n          return a.recipe_id;\n        });\n        console.log(temp);\n\n        _this.setState({\n          fav: temp\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.componentDidUpdate = function () {// const recipes = JSON.stringify(this.state.cravings);\n      // localStorage.setItem(\"recipes\", recipes);\n    };\n\n    _this.cardSave = function (recipe) {\n      var url = \"http://localhost:3005/addToFav?cardId=\" + JSON.stringify(recipe) + \"&&userName=pratik\";\n      fetch(url, {\n        method: \"GET\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n\n        return res;\n      }).then(function (responseJson) {\n        _this.setState({\n          fav: [].concat(_toConsumableArray(_this.state.fav), [recipe.recipe_id])\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.cardUnsave = function (recipe) {\n      var url = \"http://localhost:3005/removeFromFav?cardId=\" + JSON.stringify(recipe) + \"&&userName=pratik\";\n      fetch(url, {\n        method: \"GET\",\n        mode: \"cors\"\n      }).then(function (res) {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n\n        return res;\n      }).then(function (responseJson) {\n        _this.setState({\n          fav: _this.state.fav.filter(function (item) {\n            return item !== recipe.recipe_id;\n          }),\n          cravings: _this.state.cravings.filter(function (item) {\n            return item !== recipe;\n          })\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.getHeartColor = function (id) {\n      if (_this.state.fav.includes(id)) {\n        return {\n          color: \"red\"\n        };\n      } else {\n        return {\n          color: null\n        };\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Fav, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Layout, {\n        className: \"layout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(Menu, {\n        theme: \"dark\",\n        mode: \"horizontal\",\n        defaultSelectedKeys: [\"2\"],\n        style: {\n          lineHeight: \"64px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Menu.Item, {\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"/\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Home\")), React.createElement(Menu.Item, {\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Fav\"))), React.createElement(Content, {\n        style: {\n          padding: \"0 50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Breadcrumb, {\n        style: {\n          margin: \"16px 0\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          background: \"#fff\",\n          padding: 24,\n          minHeight: 280\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          background: \"#ECECEC\",\n          padding: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.state.cravings.length > 0 && React.createElement(Row, {\n        gutter: 16,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.cravings.map(function (recipe, index) {\n        return React.createElement(Col, {\n          span: 6,\n          key: recipe.recipe_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(Card, {\n          style: {\n            width: 400,\n            marginBottom: 15\n          },\n          cover: React.createElement(\"img\", {\n            alt: \"example\",\n            src: recipe.image_url,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }),\n          actions: [React.createElement(Icon, {\n            type: \"heart\",\n            style: _this2.getHeartColor(recipe.recipe_id),\n            theme: _this2.state.fav.includes(recipe.recipe_id) ? \"filled\" : \"outlined\",\n            onClick: function onClick() {\n              return _this2.state.fav.includes(recipe.recipe_id) ? _this2.cardUnsave(recipe) : _this2.cardSave(recipe);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }), React.createElement(Icon, {\n            type: \"global\",\n            onClick: function onClick() {\n              return window.open(recipe.publisher_url);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171\n            },\n            __self: this\n          })],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(Meta, {\n          title: recipe.title,\n          description: recipe.publisher,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        })));\n      })), this.state.cravings.length === 0 && React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"No Fav Recipe\"))))), React.createElement(Footer, {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Ant Design \\xA92018 Created by Ant UED\"));\n    }\n  }]);\n\n  return Fav;\n}(Component);\n\nexport default Fav;","map":{"version":3,"sources":["/Users/pratikshekhar/Desktop/cs530/FontEnd/src/Components/Fav.js"],"names":["React","Component","apiKey","Link","Layout","Menu","Breadcrumb","Card","Col","Row","Icon","Meta","Header","Content","Footer","Fav","state","cravings","fav","getCravings","e","recipeName","target","elements","value","preventDefault","fetch","apiCall","json","data","setState","recipes","console","log","componentDidMount","url","method","mode","then","res","ok","Error","statusText","responseJson","temp","map","a","recipe_id","catch","err","componentDidUpdate","cardSave","recipe","JSON","stringify","headers","cardUnsave","filter","item","getHeartColor","id","includes","color","lineHeight","pathname","padding","margin","background","minHeight","length","index","width","marginBottom","image_url","window","open","publisher_url","title","publisher","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport apiKey from \"../Constant.js\";\nimport { Link } from \"react-router-dom\";\nimport { Layout, Menu, Breadcrumb } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport { Card, Col, Row, Icon } from \"antd\";\n\nconst { Meta } = Card;\nconst { Header, Content, Footer } = Layout;\n\nclass Fav extends Component {\n  state = {\n    cravings: [],\n    fav: []\n  };\n\n  getCravings = async e => {\n    const recipeName = e.target.elements.recipeName.value;\n    e.preventDefault();\n    const apiCall = await fetch(\n      `https://www.food2fork.com/api/search?key=${apiKey}&q=${recipeName}&count=20`\n    );\n    const data = await apiCall.json();\n    this.setState({ cravings: data.recipes });\n    console.log(this.state.cravings);\n  };\n\n  componentDidMount = () => {\n    // const json = localStorage.getItem(\"recipes\");\n    // const recipes = JSON.parse(json);\n    // this.setState({ cravings: recipes });\n    var url = \"http://localhost:3005/getFav?userName=pratik\";\n    fetch(url, {\n      method: \"GET\",\n      mode: \"cors\"\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n        return res;\n      })\n      .then(res => res.json())\n      .then(responseJson => {\n        console.log(responseJson);\n        this.setState({ cravings: responseJson });\n        var temp = responseJson.map(a => a.recipe_id);\n        console.log(temp);\n        this.setState({\n          fav: temp\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  componentDidUpdate = () => {\n    // const recipes = JSON.stringify(this.state.cravings);\n    // localStorage.setItem(\"recipes\", recipes);\n  };\n\n  cardSave = recipe => {\n    var url =\n      \"http://localhost:3005/addToFav?cardId=\" +\n      JSON.stringify(recipe) +\n      \"&&userName=pratik\";\n    fetch(url, {\n      method: \"GET\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n        return res;\n      })\n      .then(responseJson => {\n        this.setState({\n          fav: [...this.state.fav, recipe.recipe_id]\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  cardUnsave = recipe => {\n    var url =\n      \"http://localhost:3005/removeFromFav?cardId=\" +\n      JSON.stringify(recipe) +\n      \"&&userName=pratik\";\n    fetch(url, {\n      method: \"GET\",\n      mode: \"cors\"\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw Error(res.statusText);\n        }\n        return res;\n      })\n      .then(responseJson => {\n        this.setState({\n          fav: this.state.fav.filter(item => item !== recipe.recipe_id),\n          cravings: this.state.cravings.filter(item => item !== recipe)\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  getHeartColor = id => {\n    if (this.state.fav.includes(id)) {\n      return { color: \"red\" };\n    } else {\n      return { color: null };\n    }\n  };\n\n  render() {\n    return (\n      <Layout className=\"layout\">\n        <Header>\n          <div className=\"logo\" />\n          <Menu\n            theme=\"dark\"\n            mode=\"horizontal\"\n            defaultSelectedKeys={[\"2\"]}\n            style={{ lineHeight: \"64px\" }}\n          >\n            <Menu.Item key=\"1\">\n              <Link to={{ pathname: \"/\" }}>Home</Link>\n            </Menu.Item>\n            <Menu.Item key=\"2\">Fav</Menu.Item>\n          </Menu>\n        </Header>\n        <Content style={{ padding: \"0 50px\" }}>\n          <Breadcrumb style={{ margin: \"16px 0\" }} />\n\n          <div style={{ background: \"#fff\", padding: 24, minHeight: 280 }}>\n            <div style={{ background: \"#ECECEC\", padding: \"30px\" }}>\n              {this.state.cravings.length > 0 && (\n                <Row gutter={16}>\n                  {this.state.cravings.map((recipe, index) => {\n                    return (\n                      <Col span={6} key={recipe.recipe_id}>\n                        <Card\n                          style={{ width: 400, marginBottom: 15 }}\n                          cover={<img alt=\"example\" src={recipe.image_url} />}\n                          actions={[\n                            <Icon\n                              type=\"heart\"\n                              style={this.getHeartColor(recipe.recipe_id)}\n                              theme={\n                                this.state.fav.includes(recipe.recipe_id)\n                                  ? \"filled\"\n                                  : \"outlined\"\n                              }\n                              onClick={() =>\n                                this.state.fav.includes(recipe.recipe_id)\n                                  ? this.cardUnsave(recipe)\n                                  : this.cardSave(recipe)\n                              }\n                            />,\n                            <Icon\n                              type=\"global\"\n                              onClick={() => window.open(recipe.publisher_url)}\n                            />\n                          ]}\n                        >\n                          <Meta\n                            title={recipe.title}\n                            description={recipe.publisher}\n                          />\n                        </Card>\n                      </Col>\n                    );\n                  })}\n                </Row>\n              )}\n              {this.state.cravings.length === 0 && (\n                <div\n                  style={{\n                    textAlign: \"center\"\n                  }}\n                >\n                  <h5>No Fav Recipe</h5>\n                </div>\n              )}\n            </div>\n          </div>\n        </Content>\n        <Footer style={{ textAlign: \"center\" }}>\n          Ant Design ©2018 Created by Ant UED\n        </Footer>\n      </Layout>\n    );\n  }\n}\n\nexport default Fav;\n"]},"metadata":{},"sourceType":"module"}